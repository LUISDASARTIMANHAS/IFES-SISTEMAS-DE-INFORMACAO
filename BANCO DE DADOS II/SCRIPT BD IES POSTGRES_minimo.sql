-- SCRIPT de criação do Banco de Dados IES
-- 23-07-2025
---------------------------------------------------------------------------------------------------------------
CREATE TABLE PROFESSOR (
    ID_PROFESSOR INTEGER NOT NULL PRIMARY KEY,
	NOME VARCHAR(45) NOT NULL
);

CREATE TABLE CURSO (
    ID_CURSO SERIAL NOT NULL PRIMARY KEY,
	NOME VARCHAR(45) NOT NULL,
	ID_COORDENADOR INTEGER NOT NULL,

	FOREIGN KEY (ID_COORDENADOR) REFERENCES PROFESSOR (ID_PROFESSOR)
	ON DELETE RESTRICT
);

CREATE TABLE DEPARTAMENTO (
   ID_CURSO INTEGER NOT NULL,
   ID_PROFESSOR INTEGER NOT NULL,

   PRIMARY KEY(ID_CURSO, ID_PROFESSOR),

   FOREIGN KEY (ID_CURSO) REFERENCES CURSO (ID_CURSO) ON DELETE RESTRICT,
   FOREIGN KEY (ID_PROFESSOR) REFERENCES PROFESSOR (ID_PROFESSOR) ON DELETE RESTRICT
);

CREATE TABLE DISCIPLINA (
   ID_DISCIPLINA SERIAL NOT NULL PRIMARY KEY,
   NOME VARCHAR(45) NOT NULL,
   CARGA_HORARIA INTEGER NOT NULL,
   EMENTA VARCHAR(900) NOT NULL,
   ID_PRE_REQUISITO INTEGER,

   FOREIGN KEY (ID_PRE_REQUISITO) REFERENCES DISCIPLINA (ID_DISCIPLINA)
   ON DELETE RESTRICT
);

CREATE TABLE GRADE_CURRICULAR (
   NR_GRADE INTEGER NOT NULL,
   NR_PERIODO INTEGER NOT NULL,
   ID_CURSO INTEGER NOT NULL,
   ID_DISCIPLINA INTEGER NOT NULL,

   PRIMARY KEY(NR_GRADE, NR_PERIODO, ID_CURSO, ID_DISCIPLINA),

   FOREIGN KEY (ID_CURSO) REFERENCES CURSO (ID_CURSO) ON DELETE RESTRICT,
   FOREIGN KEY (ID_DISCIPLINA) REFERENCES DISCIPLINA (ID_DISCIPLINA) ON DELETE RESTRICT
);

-- CARGA INICIAL DE REGISTROS -------------------------------------------------------------------------------------------------------------------------------------------------

INSERT INTO PROFESSOR VALUES (10,'ASDRUBAL SOARES RIBEIRO'), (22,'JAMBIRA TIMBIRAS'), (31,'DESIDERIO MONFORTE');
INSERT INTO PROFESSOR VALUES (15,'SUETONIO ROMAO SOUZA'), (21,'CARLOTA FLAVINIAS'), (33,'RONALDO CARVALHO CAMPOS'),
                             (34,'EDUARDO LICOLINI'), (35,'CINTHIA RIBEIRO'),(36,'RENATO AURELIO MARCONDES'),(37,'ANA PAULA XAVIER DE ABREU'),
							 (38,'CLAUDIA LUCIA OLIVEIRA OHMS'),(39,'JOSE MAGALHAES NETO'),(40,'JOSE MAURICIO MADEIRO'), (41,'ANA PAULA LASCASAS'),
							 (42,'CLAUDIA GONCALVES RIBEIRO'),(43,'TITO CARVALHO'),(44,'ROXANNA ALVES MANGABEIRA'), (45,'LEONARDO PEREIRA');

INSERT INTO CURSO VALUES (100,'CIENCIAS ECONOMICAS', 22), (200,'ARQUITETURA E URBANISMO', 31), (300,'SISTEMAS DE INFORMACAO',10);


INSERT INTO DISCIPLINA VALUES (1079,'CALCULO', 120,'LIMITE, DIFERENCIAL E INTEGRAL.', NULL), 
                              (1080,'CALCULO 2', 120,'CALCULO NUMERICO.', 1079),
							  (1081,'LOGICA', 120, 'CALCULO PROPOSICIONAL, INFERENCIA E LOGICA NAO CLASSICA.', NULL),
							  (1082,'MATEMATICA DISCRETA', 90,'GRAFOS, AUTOMATOS FINITOS DETERMINISTICOS.', NULL),
							  (1083,'PROGRAMACAO', 120,'COMANDOS CONDICIONAIS, COMANDOS DE REPETICAO E PROCEDIMENTOS RECURSIVOS.', NULL);
							  

INSERT INTO DISCIPLINA VALUES (1084,'ESTRUTURA DE DADOS',120,'LISTAS ENCADEADAS. FILAS. PILHAS. ARVORES. GRAFOS', 1083),
                              (1085,'BANCO DE DADOS',90,'MODELAGEM. SQL.', NULL),
							  (1086,'BANCO DE DADOS 2', 120,'TRANSACOES, VIEWS, FUNCTIONS, STORED PROCEDURE, RULES.',1085);
							  

INSERT INTO GRADE_CURRICULAR VALUES (1,1,300,1079), (1,2,300,1080), (1,1,300, 1081), (1,1, 300, 1082), (1,2,300, 1083), 
                                    (1,3,300,1084), (1,3,300, 1085),(1,4,300,1086);

